---
import BaseLayoutNNyA from '../layouts/BaseLayoutNNyA.astro';
---

<BaseLayoutNNyA title="Qué hace el MPF CABA por NNyA" description="Información sobre el trabajo del MPF CABA con Niños, Niñas y Adolescentes">

  <section class="grid grid-cols-1 sm:grid-rows-4 bg-[linear-gradient(to_bottom,theme('colors.nnya-fuchsia')_75%,white_75%)] pt-0 sm:pt-36 pb-20 sm:pb-20">

    <div class="flex justify-center col-span-1 sm:col-span-4 -mt-20">    
      <div class="Banner1-NNyA text-white">
        <span class="bg-[#690d55] px-2 py-0 sm:py-1 h-24 block sm:hidden"></span>
        <span class="bg-[#690d55] px-2 py-0 sm:py-1" data-aos="fade-right" data-aos-delay="200" data-aos-duration="1000">¿Qué hace el MPF CABA por</span>
        <span class="bg-[#690d55] px-2 py-0 sm:py-1 pb-4 sm:pb-0 sm:ml-10" data-aos="fade-right" data-aos-delay="300" data-aos-duration="1000">los Niños, Niñas y Adolescentes?</span>
      </div>
      <div class="Banner2-NNyA bg-[#690d55] text-white pt-20">
        <span class="px-2 py-0 sm:py-1 h-24 block sm:hidden"></span>
        <span class="mx-4 py-0 sm:py-1 h-36" data-aos="fade-right" data-aos-delay="200" data-aos-duration="800">¿Qué hace el MPF CABA por los Niños, Niñas y Adolescentes?</span>
      </div>
    </div>

    <div class="text-center col-span-1 sm:col-span-4 -mt-4 sm:-mt-14" data-aos="fade-right" data-aos-delay="200" data-aos-duration="800">      
      <p class="StandardContainer TxtBase text-start mt-14 lg:mt-8 sm:mt-8 text-white">
        En el Ministerio Público Fiscal de la Ciudad contamos con un área encargada de asistir a todos los niños, niñas y adolescentes (NNyA).
      </p> </div>

    <div class="col-span-1 sm:col-span-4 sm:row-span-2 flex justify-center" data-aos="fade-up" data-aos-delay="200" data-aos-duration="800">
        <img
        src="https://res.cloudinary.com/dnf5pehhx/image/upload/v1758207790/Sin-t%C3%ADtulo-1_zoment.png" alt="Ilustración de NNyA"
        class="h-52 w-auto sm:h-72 mt-6 sm:-mt-14 xl:-mt-10"/>
    </div>

  </section>

  <section class="w-full text-nnya-fuchsia mb-8 -mt-12" data-aos="fade-right" data-aos-delay="200" data-aos-duration="800">
    <div class="StandardContainer">
      <span class="titleNNyA-Col">¿Quién puede denunciar?</span>
      <ul class="listado TxtBase mt-4">
        <li>Niños, niñas y adolescentes víctimas de un delito.</li>
        <li>Familiares y personas adultas referentes (docentes, vecinos, personal de organismos, etc.).</li>
        <li>Cualquier persona con conocimiento o sospecha de vulneración de derechos.</li>
      </ul>
      <p class="TxtBase font-semibold pt-4">
        Si necesitás más asesoramiento o querés denunciar de manera presencial, acercate a cualquiera de nuestros Puntos de Acceso en la Ciudad.
      </p>
    </div>
  </section>

  <section class="StandardContainer pb-8 sm:pb-8" data-aos="fade-down" data-aos-delay="200" data-aos-duration="800">
    <!-- 1. Contenedor donde se renderizará el mapa. Le damos una altura con `style`. -->
    <div id="map" class="w-full rounded-lg z-0" style="height: 450px;"></div>
  </section>

  <!-- 2. Añadimos los archivos de la librería Leaflet. Astro los colocará en el <head> del HTML final. -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script is:inline src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <!-- 3. Script del lado del cliente para inicializar el mapa y obtener los datos de la API. -->
  <script is:inline>
    document.addEventListener('DOMContentLoaded', () => {
      // Coordenadas iniciales para centrar el mapa (centro de CABA) y nivel de zoom.
      const initialCoords = [-34.6037, -58.3816];
      const initialZoom = 13;

      // Inicializamos el mapa en el div con id="map".
      const map = L.map('map').setView(initialCoords, initialZoom);

      // Añadimos una capa de mapa base (usamos OpenStreetMap, que es gratuito).
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      // Hacemos la llamada a la API para obtener los puntos de interés.
      fetch('https://mpfciudad.gob.ar/api/v1.0/puntos_interes')
        .then(response => response.json())
        .then(data => {
          console.log('Datos recibidos de la API:', data); // <--- Mira la consola del navegador (F12) para ver los nombres reales
          
          // Si la API devuelve un objeto { data: [...] } en lugar de un array directo, esto lo arregla:
          const listaPuntos = Array.isArray(data) ? data : (data.data || []);

          listaPuntos.forEach(punto => {
            // Intentamos leer latitud/longitud con nombres comunes
            const lat = punto.lat || punto.latitud || punto.latitude;
            const lng = punto.lng || punto.longitud || punto.longitude || punto.lon;

            if (lat && lng) {
              L.marker([lat, lng]).addTo(map)
                .bindPopup(`<b>${punto.nombre || 'Punto de Interés'}</b><br>${punto.direccion || ''}`);
            }
          });
        })
        .catch(error => console.error('Error al cargar los puntos de interés:', error));
    });
  </script>

    <section class="w-full text-nnya-fuchsia pt-8 sm:pt-2 pb-12">
      <div class="StandardContainer space-y-3">
        <p class="TxtBase" data-aos="fade-down" data-aos-delay="200" data-aos-duration="800">
          El Ministerio Público Fiscal de la Ciudad trabaja por una justicia ágil y cercana, que promueve el respeto de los derechos y la protección a las víctimas.
        </p>
        <p class="text-3xl sm:text-2xl font-bold leading-[1.05] sm:leading-[1.2] pt-4" data-aos="fade-down" data-aos-delay="200" data-aos-duration="800">
          Si sabés que un niño, niña o adolescente es víctima de un delito,
          <span class="underline decoration-pink-200 decoration-4 underline-offset-2">denunciá.</span>
        </p>
        <p class="TxtBase text-nnya-fuchsia/70 font-semibold" data-aos="fade-down" data-aos-delay="200" data-aos-duration="800">Tu denuncia importa.</p>
      </div>
    </section>
    
    <section class="w-full bg-nnya-fuchsia text-white">
      <div class="StandardContainer relative pt-10 sm:pt-16 space-y-6" data-aos="fade-right" data-aos-delay="200" data-aos-duration="800">
        <span class="titleNNyA-Wh pt-1 sm:pt-1">¿Qué podés denunciar?</span>
        <ul class="listado TxtBase">
          <li>Explotación y/o abuso sexual (con o sin contacto físico).</li>
          <li>Acoso sexual virtual (grooming).</li>
          <li>Maltrato físico, psicológico o emocional.</li>
          <li>Hostigamiento y amenazas (virtual o presencial).</li>
          <li>Incumplimiento de medidas judiciales de protección.</li>
          <li>Otros delitos…</li>
        </ul>
    </section>

    <section class="TxtBase grid grid-cols-1 bg-[linear-gradient(to_bottom,theme('colors.nnya-fuchsia')_75%,white_75%)]">
        <div class="font-semibold text-white col-span-4 StandardContainer text-start mt-8" data-aos="fade-right" data-aos-delay="200" data-aos-duration="800">
          <p>Podés denunciar toda situación de riesgo que afecte la integridad física, psicológica, emocional o sexual de los niños, niñas y adolescentes.</p>
        </div>
          
        <div class="font-normal text-white/70 col-span-4 StandardContainer text-start mt-4" data-aos="fade-right" data-aos-delay="200" data-aos-duration="800">
          <p>Es muy importante garantizar cuanto antes la protección de la víctima y denunciar el hecho a la brevedad.</p>
        </div>

        <div class="col-span-4 flex justify-center" data-aos="fade-up" data-aos-delay="200" data-aos-duration="800">
          <img src="https://res.cloudinary.com/dnf5pehhx/image/upload/v1757699734/Sin-t%C3%ADtulo-1_pcin8b.png" alt="Ilustración de una mujer abrazando a un niño"
          class="h-60 w-auto sm:h-80 mt-6 sm:mt-8 pr-12"/>
        </div>
    </section>
        
    <section class="StandardContainer pt-8 text-nnya-fuchsia" data-aos="fade-right" data-aos-delay="200" data-aos-duration="800">
      <p class="TxtBase font-semibold">Es importante que sepas que:</p>
      <ul class="TxtBase listado pt-4">
        <li>Si ya hiciste una denuncia y ocurrieron nuevos hechos, tenés que volver a denunciar para que se puedan ordenarnuevas medidas de protección.</li>
        <li>Si el hecho sucedió en otra provincia, igual podés denunciar en CABA.</li>
        <li>Tenemos un espacio para la promoción y protección de derechos de NNyA en Av. Paseo Colón 1333 piso 7°, de lunes a viernes de 9 a 15 hs. Es una sala con juegos donde NNyA pueden permanecer mientras sus cuidadores realizan trámites vinculados a denuncias y procesos judiciales.</li>
        <li>Siempre tenés derecho a saber cómo sigue tu denuncia.</li>
      </ul>
    </section>

</BaseLayoutNNyA>
